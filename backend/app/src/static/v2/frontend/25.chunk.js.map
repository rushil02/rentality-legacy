{"version":3,"sources":["webpack:///./src/houseListing/views/forms/FormCommon.css","webpack:///./src/houseListing/views/forms/FormCommon.css?3f61","webpack:///./src/houseListing/views/forms/facilities/FacilitiesContainer.js"],"names":["FacilitiesSelectorHandler","props","formID","onFacilityUpdate","objID","value","setState","prevState","data","updateObject","navContext","updateFormState","sync","onFacilityAdd","input","text","update","Facility","id","verbose","checked","focus","onSave","e","that","stopPropagation","Promise","resolve","reject","postFacilityData","houseUUID","state","then","facilityList","error","alertUser","init","stockAlertType","cache","undefined","APIModelListAdapter","loadForm","status","getFacilityData","result","updateStoreObject","unloadForm","addField","commonStyles","pageTitle","getObjectList","map","toString","key","Component","FacilitiesComponent","getData","objReference","onChange","target"],"mappings":"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","file":"25.chunk.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"._27ruxPq0KQM3SyR5f456h1 {\\n    font-size: 20px;\\n    font-weight: 700;\\n    color: #000000;\\n    margin-top: 50px;\\n    margin-bottom: 50px;\\n}\\n\\n._27ruxPq0KQM3SyR5f456h1 i {\\n    background-image: url('/static/image/popover.svg');\\n    background-repeat: no-repeat;\\n    background-position: center right;\\n    margin-left: 30px;\\n    width: 16px;\\n    height: 16px;\\n    cursor: alias;\\n    font-style: unset;\\n    margin-bottom: -4px;\\n    font-size: 13px;\\n    font-weight: 400;\\n    color: #8f8f8f;\\n    padding-right: 26px;\\n}\\n\", \"\"]);\n\n// Exports\nexports.locals = {\n\t\"pageTitle\": \"_27ruxPq0KQM3SyR5f456h1\"\n};","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!./FormCommon.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!./FormCommon.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--5-1!./FormCommon.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React, {Component} from 'react';\nimport {alertUser} from \"core/alert/Alert\";\nimport {getFacilityData, postFacilityData} from \"houseListing/services\";\nimport {Facility} from \"houseListing/models\";\nimport {APIModelListAdapter} from \"core/utils/ModelHelper\";\n\nimport commonStyles from \"../FormCommon.css\"\n\n\nexport default class FacilitiesSelectorHandler extends Component {\n    formID = 3;\n\n    constructor(props) {\n        super(props);\n        if (props.cache.data === undefined) {\n            this.state = {\n                data: new APIModelListAdapter([], Facility, 'id', 'empty'),\n            };\n        } else {\n            this.state = {\n                data: props.cache.data,\n            };\n        }\n    }\n\n    componentDidMount() {\n        this.props.navContext.data.loadForm(this.formID, this.onSave, 'initial', \"Facilities\");\n        if (this.state.data.status === 'empty') {\n            getFacilityData(this.props.houseUUID)\n                .then(result => {\n                    this.setState(prevState => (\n                        {\n                            ...prevState,\n                            data: result\n                        })\n                    );\n                    this.props.navContext.data.updateFormState(this.formID, 'saved');\n                    this.props.navContext.sync();\n                });\n        } else {\n            this.props.navContext.data.updateFormState(this.formID, this.state.data.status);\n\n        }\n        this.props.navContext.sync();\n\n    };\n\n    componentWillUnmount() {\n        this.props.cache.updateStoreObject('facilitiesData', () => this.state.data);\n        this.props.navContext.data.unloadForm();\n    }\n\n\n    onFacilityUpdate = (objID, value) => {\n        this.setState(prevState => ({\n                ...prevState,\n                data: prevState.data.updateObject(objID, 'checked', value)\n            })\n        );\n        this.props.navContext.data.updateFormState(this.formID, 'hasChanged');\n        this.props.navContext.sync();\n    };\n\n    onFacilityAdd = (input) => {\n        let text = input.value;\n        if (text !== \"\") {\n            this.setState(prevState => ({\n                    data: prevState.data.update(new Facility({id: null, verbose: text, checked: true}, 'hasChanged'), text)\n                })\n            );\n\n            input.value = \"\";\n\n            this.props.navContext.data.updateFormState(this.formID, 'hasChanged');\n            this.props.navContext.sync();\n        }\n        input.focus();\n\n    };\n\n\n    onSave = (e) => {\n        const that = this;\n        e.stopPropagation();\n        return new Promise((resolve, reject) => {\n            postFacilityData(that.props.houseUUID, that.state.data)\n                .then(facilityList => {\n                    that.setState({data: facilityList});\n                    that.props.navContext.data.updateFormState(that.formID, 'saved');\n                    that.props.navContext.sync();\n                    resolve(facilityList);\n                })\n                .catch(error => {\n                    alertUser.init({stockAlertType: 'unknownError'});\n                    that.props.navContext.data.updateFormState(that.formID, 'error');\n                    that.props.navContext.sync();\n                    reject(error)\n                })\n        })\n\n\n    };\n\n\n    render() {\n        let addField;\n        return (\n            <React.Fragment>\n                <div id=\"form-3\">\n                    <div className=\"row\">\n                        <div className=\"col-md-1\"/>\n                        <div className=\"col-md-10\">\n                            <h1 className={commonStyles.pageTitle}>Select all the facilities you offer in the home</h1>\n                            <div className=\"row\">\n                                <div className=\"col-md-12\">\n                                    <div className=\"checkbox\">\n                                        <ul className=\"list-inline\" id=\"facilities-list\">\n                                            {this.state.data.getObjectList().map((data) =>\n                                                <FacilitiesComponent\n                                                    data={data[1]} key={data[0].toString()}\n                                                    onChange={this.onFacilityUpdate}\n                                                    objReference={data[0]}\n                                                />\n                                            )}\n                                        </ul>\n                                    </div>\n                                    <div className=\"row\">\n                                        <div className=\"col-md-6 col-sm-12\">\n                                            <div className=\"input big no-background\">\n                                                <input type=\"text\" className=\"form-control anything-else\"\n                                                       id=\"other-facility-text\"\n                                                       ref={(input) => {\n                                                           addField = input;\n                                                       }}\n                                                       onKeyPress={(e) => {\n                                                           if (e.key === 'Enter') {\n                                                               this.onFacilityAdd(addField)\n                                                           }\n                                                       }}\n                                                       placeholder=\"Add other facilities\"/>\n                                            </div>\n                                        </div>\n                                        <div className=\"col-md-2\">\n                                            <button type=\"submit\" className=\"default-button-style\"\n                                                    onClick={() => this.onFacilityAdd(addField)}\n                                            > Add\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"col-md-1\"/>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n}\n\n\nfunction FacilitiesComponent(props) {\n    return (\n        <li className=\"list-inline-item\">\n            <div className=\"custom-control custom-checkbox\">\n                <input\n                    type=\"checkbox\"\n                    className=\"custom-control-input\"\n                    checked={props.data.getData('checked')}\n                    id={`facility-checkbox-${props.objReference}`}\n                    onChange={(e) => {\n                        props.onChange(props.objReference, e.target.checked)\n                    }}\n                />\n                <label className=\"custom-control-label\" htmlFor={`facility-checkbox-${props.objReference}`}>\n                    {props.data.getData('verbose')}\n                </label>\n            </div>\n        </li>\n    )\n}\n"],"sourceRoot":""}