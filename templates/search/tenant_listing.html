{% extends 'utils/base_user_auto.html' %}

{% block content %}


    <!-- BEGIN HOME ADVANCED SEARCH (class="gray" for a gray background) -->
    <div id="advanced-search" class="gray open" style="text-align: left;">
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12">
                    <form method="GET" action="">

                        <div class="row">
                            <div class="col-md-12 col-sm-12">
                                {{ search_form.location }}
                            </div>
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-md-9 col-sm-12">
                                            <div class="noleftspace col-md-3 col-sm-4">
                                                {{ search_form.bedrooms }}
                                            </div>
                                            <div class="noleftspace col-md-3 col-sm-4">
                                                {{ search_form.bathrooms }}
                                            </div>
                                            <div class="noleftspace col-md-3 col-sm-4">
                                                {{ search_form.max_price }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </div>

                        <a id='search-btn' class="btn btn-fullcolor pull-right">Search</a>

                    </form>
                </div>

            </div>
        </div>
    </div>
    <!-- END HOME ADVANCED SEARCH -->

    <!-- BEGIN CONTENT WRAPPER -->
    <div class="content">
        <div class="container-fluid">
            <div class="row" id="search-content">

                <!-- BEGIN MAIN CONTENT -->
                <div class="main col-sm-12">

                    <!-- BEGIN PROPERTY LISTING -->
                    <div id="property-listing" class="grid-style1 clearfix">
                        <div class="row">
                            <div class="item col-sm-3"><!-- Set width to 4 columns for grid view mode only -->
                                <div class="image">
                                    <a href="">
                                        <h3>asdndfjnl</h3>
                                        <span class="location"></span>
                                    </a>
                                    <img src="/static/img/placeholders/apartment/default.png" alt=""/>
                                </div>
                                <div class="info">
                                    <h3>
                                        <a href="">House num 1</a>
                                        <small>Address - Suburb</small>
                                    </h3>
                                    <p>480
                                        <small>/week</small>
                                    </p>

                                    <p>Available By: Enquire for details.</p>

                                    <p>Rental Term: Enquire for details</p>

                                    <ul class="amenities">
                                        <li><i class="icon-bedrooms"></i> 5</li>
                                        <li><i class="icon-bathrooms"></i> 4</li>
                                        <li><i class="icon-garage"></i> 1</li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!-- END PROPERTY LISTING -->


                    <!-- BEGIN PAGINATION -->
                    <div class="pagination">
                        <ul id="previous">
                            <li><a href="#"><i class="fa fa-chevron-left"></i></a></li>
                        </ul>
                        <ul>
                            <li class="active"><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                        </ul>
                        <ul id="next">
                            <li><a href="#"><i class="fa fa-chevron-right"></i></a></li>
                        </ul>
                    </div>
                    <!-- END PAGINATION -->

                </div>
                <!-- END MAIN CONTENT -->

            </div>
        </div>
    </div>
    <!-- END CONTENT WRAPPER -->


{% endblock %}

{% block js_script %}
    <script>
        $(document).ready(function () {
            $.ajax({
                method: "GET",
                url: "{% url 'tenant:search_api' %}",
                data: {query: '{{ initial_query }}'}
            }).done(function (data) {
                console.log(data);
                $("#search-content").empty();
                $.each(data, function (i, item) {
                    var move_in_date = jQuery.parseJSON(item['move_in_date']);
                    var move_out_date = jQuery.parseJSON(item['move_out_date']);

                    var tar_html = "<div class=\"item col-sm-3\"><!-- Set width to 4 columns for grid view mode only -->\n" +
                        "                                <div class=\"image\">\n" +
                        "                                    <a href=\"\">\n" +
                        "                                        <h3></h3>\n" +
                        "                                        <span class=\"location\"></span>\n" +
                        "                                    </a>\n" +
                        "                                    <img src=\"" + item['thumbnail'] + "\" alt=\"\"/>\n" +
                        "                                </div>\n" +
                        "                                <div class=\"info\">\n" +
                        "                                    <h3>\n" +
                        "                                        <a href=\"\">Sa</a>\n" +
                        "                                        <small>" + item['locations'] + "</small>\n" +
                        "                                    </h3>\n" +
                        "                                    <p>" + item['max_budget'] + "\n" +
                        "                                        <small>/week</small>\n" +
                        "                                    </p>\n" +
                        "\n" +
                        "                                    <p>Move in Date: " + move_in_date['lower'] + " to " + move_in_date['upper'] + "</p>\n" +
                        "\n" +
                        "                                    <p>Move out date: " + move_out_date['lower'] + " to " + move_out_date['upper'] + "</p>\n" +
                        "\n" +
                        "                                </div>\n" +
                        "                            </div>";
                    $("#search-content").append(tar_html)

                })
            });
        });

    </script>

    <script>
        $("#search-btn").click(function () {
            $.ajax({
                method: "GET",
                url: "{% url 'house:search_house_api' %}",
                data: {query: $('#id_location').val()}
            })
                .done(function (data) {
                    $("#search-content").empty();
                    $.each(data, function (i, item) {
                        var move_in_date = jQuery.parseJSON(item['move_in_date']);
                        var move_out_date = jQuery.parseJSON(item['move_out_date']);

                        var tar_html = "<div class=\"item col-sm-3\"><!-- Set width to 4 columns for grid view mode only -->\n" +
                            "                                <div class=\"image\">\n" +
                            "                                    <a href=\"\">\n" +
                            "                                        <h3></h3>\n" +
                            "                                        <span class=\"location\"></span>\n" +
                            "                                    </a>\n" +
                            "                                    <img src=\"" + item['thumbnail'] + "\" alt=\"\"/>\n" +
                            "                                </div>\n" +
                            "                                <div class=\"info\">\n" +
                            "                                    <h3>\n" +
                            "                                        <a href=\"\">Sa</a>\n" +
                            "                                        <small>" + item['locations'] + "</small>\n" +
                            "                                    </h3>\n" +
                            "                                    <p>" + item['max_budget'] + "\n" +
                            "                                        <small>/week</small>\n" +
                            "                                    </p>\n" +
                            "\n" +
                            "                                    <p>Move in Date: " + move_in_date['lower'] + " to " + move_in_date['upper'] + "</p>\n" +
                            "\n" +
                            "                                    <p>Move out date: " + move_out_date['lower'] + " to " + move_out_date['upper'] + "</p>\n" +
                            "\n" +
                            "                                </div>\n" +
                            "                            </div>";
                        $("#search-content").append(tar_html)
                    })
                });
        });
    </script>

{% endblock %}

